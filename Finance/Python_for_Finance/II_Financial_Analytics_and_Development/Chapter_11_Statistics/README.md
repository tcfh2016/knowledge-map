# Chapter 11. Statistics

统计学是一门应用广泛的学课，但是在本章里仅仅聚焦以下四个方面：

- 正态性检验（normality test）。平均方差投资组合理论（mean-variance portfolio theory）和资本资产定价模型（capital asset pricing model, CAPM）等财务模型都是基于证券回报符合正态分布的假设，因此这部分提供一些测试符合正态分布回报的测试方法。
- 投资组合理论（portfolio theory）。由哈里·马克维兹（Harry Markowitz）在20世纪50年代开创的现代投资组合理论（modern portfolio theory, MPT）被认为是概率论应用于金融领域最大的成功之一，它替代了人们依靠严格的数学和统计方法形成的判断和经验，所以被看作是第一个真正意义上的量化投资方法。
- 主成分分析（principal component analysis）。在制定股权投资策略或解释利率波动的主要因素时，通常会使用PCA分析方法。这种方法的好处是可以从大量高度相关的时间序列数据集里面推导出一小组线性独立（不相关，正交）的分量，大大降低了复杂度。
- 贝叶斯回归（bayesian regression）。贝叶斯统计从根本上引入了代理人“信念”的概念，并将“信念更新”为统计数据。 例如，当涉及线性回归时，它可能采用具有统计分布的形式来表示回归参数，而不是单点估计值（例如，回归线的截距和斜率）。 如今，贝叶斯方法在金融中非常流行并且很重要，这就是为什么我们在本章中说明某些（高级）应用程序的原因。

## 正态性检验（Normality Tests）

正态分布被认为是金融领域最重要的概率分布，下面的几个金融领域的基础理论都是建立在正态分布的基础之上：

- 投资组合理论（Portfolio theory）。当股票收益符合正态分布时，最优的投资组合可以通过衡量不同股票的平均回报、收益方差（波动）和协方差来确定。
- 资本资产定价模型（ Capital asset pricing model ）。当股票收益符合正态分布时，单只股票的价格可以通过其与宽基市场指数（broad market index）相对关系来描述，也就是 beta。
- 有效市场假说（Efficient markets hypothesis）。一个有效的市场被认为即时反应了所有信息，这些信息可以被广义或者狭义的定义。如果这种假设成立，那么股价的波动是随机的，股价收益服从正态分布。
- 期权定价理论（Option pricing theory）。布朗运动是对股价随机变动的基准建模，著名的布莱克·斯科尔斯·默顿期权定价公式(Black-Scholes-Merton)使用了几何布朗运动来模拟股价随时间变动，它的收益服从正态分布。

### 基准案例（Benchmark Case）

下面是一个金融模型里使用几何布朗运动来作为典型随机过程的例子。首先定义一个在几何布朗运动里用来生成蒙特卡洛路径的函数。这个函数包括如下步骤：

- 根据指定时间区间，为每个时间（比如每天）生成I个随机数，I个随机数会用来计算I种可能的行情数据。
- 计算过程：
  - 对I个随机数进行归一化，使之服从标准正态分布。
  - 对I个随机数分别使用“莫顿定价公式”，用来生成当天的模拟行情数据。
  - 循环指定的时间区间，逐一确定所有时间的模拟行情数据。

然而，我们更感兴趣的是这些数据的对数分布。因此，我们对得到的模拟结果来查看某天的行情相对于前一天的涨跌幅:

```
log_returns = np.log(paths[1:] / paths[0:-1])
```

需要留意的是我们目前已经取得了一段时间内的模拟行情数据，但这里为什么要计算“log(第n天相对于第n-1天的收盘价)”而不是直接使用“第n天相对于第n-1天的收盘价”？
